# 🗓️ 2025-08-04 TIL 27일차

## ✅ 오늘의 성취 (잘한 점)

- 스프린트 끄읏~~~~~~~

---

## 📚 오늘의 학습 (배운 점)

### 🔹 핵심 주제

- 비동기 처리 문법 (`await`, `then`, `catch`)
- URL 및 파라미터 구성 방식
- PATCH 요청 시 주의 사항

### 🔹 주요 개념 정리

- `params` 처리 방식 두 가지
- `url` 함수 재사용 관련 주의점
- `patch` 사용 시 `id` 필요
- `res.json()` 실패 시 에러 처리 방법

### 🔹 예제 코드

- `params` 필터링 처리 예시
- `res.json()` 파싱 실패 대비 예시

<details>
<summary style="font-size: 22px;">📓 메모장</summary>

- `page`, `pageSize`, `keyword`의 사용 위치에 대한 고민

  - 파라미터에 설정 후 템플릿 리터럴 방식 사용 가능
  - 또는 객체 형식으로 인자 전달 가능

    - 첫 번째 방식: `params` 객체 생성 후, 호출 시 객체 그대로 전달
    - 두 번째 방식: 구조분해 할당으로 내부 `params` 정의 후, 호출 시 동일한 형태로 전달

- `url` 함수 재사용 시 `id`도 `append` 방식 사용 가능

  - 사용은 가능하나, URL 함수 재사용 자체는 주소 충돌 우려로 지양 권장

- `await`과 `then`의 관계

  - 둘 다 비동기 데이터 핸들링 문법

- `then`, `catch` 메서드 내 함수 구성

  - 반드시 콜백 함수가 인자로 필요

- `PATCH` 요청 시 주의 사항

  - 수정할 대상 `id` 필수
  - 수정 데이터 객체 + `id` 값 둘 다 함께 전달 필요

- `try` 블록에 여러 줄 존재 시

  - `catch` 블록이 한 줄이라도 반드시 중괄호 사용 (파싱 문제 방지 목적)

- 최상위 `await` 사용 조건

  - 다음 중 하나 이상 충족 시 사용 가능

    - `package.json`에 `"type": "module"` 설정
    - `.mjs` 확장자 사용
    - 브라우저 환경에서 `<script type="module">` 설정

- 변수명 및 API 함수명 표현 개선 필요

  - 보다 명확하고 적절한 네이밍 고려

- `package.json`의 `"type": "module"` 설정 유효 범위

  - `Node.js` 환경에서만 적용됨
  - 브라우저 환경에서는 `<script type="module">` 사용 필요

---

**추가 참고사항**

- `params` 값에 대한 타입 체크 및 필터링 고려

  ```js
  Object.entries(params).forEach(([key, value]) => {
    if (value !== undefined && value !== null && value !== "") {
      url.searchParams.append(key, value);
    }
  });
  ```

- `res.json()` 파싱 실패 대비 로직

  ```js
  let data;
  try {
    data = await res.json();
  } catch {
    throw new Error("서버 응답 파싱에 실패했습니다.");
  }
  return data;
  ```

</details>

---

## 🧠 오늘의 개선 (어렵거나 아쉬웠던 점)

- 삽질 시간이 좀 걸렸다.. 좀 구조적으로 생각해봤으면 이러지 않았을텐데

---

## 🚀 내일의 계획

- 빨리빨리!! React 고고!!!

---
