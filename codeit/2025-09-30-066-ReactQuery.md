# 🗓️ yyyy-mm-dd TIL n일차

## ✅ 오늘의 성취 (잘한 점)

- 예
- 예

---

## 📚 오늘의 학습 (배운 점)

### 🔹 핵심 주제

### 🔹 주요 개념 정리

### 🔹 예제 코드

<details>
<summary style="font-size: 22px;">📓 메모장</summary>

# Tanstack Query

## useQuery

#### 왜 new QueryClient()를 바로 쓰면 안될까?
- nextjs는 MPA이기 때문에 const queryClient = new QueryClient(); 하면 queryClient가 페이지마다(렌더링될 때마다) 인스턴스 생성  
- QueryClient는 앱 전체에서 싱글턴처럼 유지해야하는 객체 => 매번 새로 만들어지면 캐시 초기화로 인해 사용할 이유X
- 인스턴스 하나만 만들어 모든 페이지에 공유하기 위해서는 최초 렌더링 때 한 번만 생성후 재사용 해야함

#### 왜 useState를 쓸까?
- useState에 함수(new QueryCLient())를 넘기면 최초 렌더링 때만 실행
- 이후 리렌더링 시에도 useState가 내부에 기억해 둔 객체 계속 반환

#### useRef 사용해도 되지 않나?
- useRef 역시 리렌더될 때 같은 .current 객체를 유지
- 다만 queryClient.current로 접근해야하기 때문에 불편
- React Query에서도 useState 사용 권장

```jsx

const [queryClient] = useState(() => new QueryClient());
// React Query 사용할 수 있게 context 제공
// client prop으로 queryClient 인스턴스 전달
<QueryClientProvider client={queryClient}></QueryClientProvider>
```

Q. 어느 렌더링에서도 변하지 않을 값을 만들거면 useRef로 queryClient를 만들어도 되지 않나? 왜 굳이 useState를 쓰는걸까? 사실 적절하지 않아보임..

시점이! queryKey로 stale 데이터 먼저 쓰고 그 담에 queryFn으로 캐시 무효화

isPending - 재유효화 제외 캐시 컨텍스트에 키 없어서 db로 갔다오는거만 로딩
isFetching - 재유효화 포함 db로 갔다오는거까지 로딩

</details>

---

## 🧠 오늘의 개선 (어렵거나 아쉬웠던 점)

- 예
- 예

---

## 🚀 내일의 계획

- 예
- 예

---


개인적으로 해석하기
선택적 추상화
성급한 결론 내리기
최소화
확대하기
과잉 일반화
흑백논리

부정적인 감정, ㄱㅜㄴㅇㄹ 유발하는 생각에 대해 지지하는 근거 먼저 찾기
그렇게 생각하는 근거가 뭔가
부정적인 감저ㅇ,기분을 유발하는 생각에 대해 반대하는 근거 먼저 ㅏ찾아보기
내 새악ㄱ에 반대되는 근거 찾는데 도움되는 질문들 ㄷ떠올리기
1. 만약 친한 친구나 가족이 이 생각을 하고 있다면 나는 어떻게 말할래?
2. 가장 친한 친구나 가족이 내 생각을 알고 있ㅏ면 내개ㅔ 무러가ㅗ 말할까?
3. 이 상황에서 좋은점 유리한점이 있는데도 내가 무시하고 ㅣㅇㅆ는게 없나?
4. 증거의 타당성이 입증되지 않은 성급한 결론이 아닌가?