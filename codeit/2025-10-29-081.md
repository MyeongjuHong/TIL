# 🗓️ 20yy-mm-dd TIL n일차

## ✅ 오늘의 진행 (완료한 작업)

- 디스코드 진행상황 체크 봇 구현
- prisma migrate 에러 해결

---

## 🛠️ 작업 상세

### 🔹 구현/수정한 기능

- 예

### 🔹 발생한 이슈 & 해결 과정

- 그저 pull이 덜 됐다..! merge 관련 git 파일이 덜 닫혀서 그런 것 같다.

### 🔹 미해결/보류된 이슈

- 예

---

## 📓 작업 메모 (코드/아이디어/레퍼런스)

<details>
<summary style="font-size: 22px;">📝 메모장</summary>

```md
# 오늘 할 일
1번 - 컴포넌트 단위별로 push, 퇴근 전에 PR, 작업은 마이갤러리 페이지까지
2번 - 알림 UI 드롭다운으로 컴포넌트화, API 연동
3번 - 마켓 플레이스 구매자 페이지 작업
4번 - 카드 교환 거래 API 작업
5번 - 마이갤러리 세부 페이지 API 작업
6번 - 랜덤 포인트 모달 작업
```

## 🔹 디스코드 알림봇 완전 프로세스

### 1️⃣ Discord Developer Portal에서 봇 생성

- **앱 생성** → Bot 생성
- **Bot Token 발급** → `.env`에 저장 (`DISCORD_TOKEN`)
- **Privileged Gateway Intents 설정**
  ![Privileged Gateway Intents 필수 체크사항](image.png)

  - `MESSAGE CONTENT INTENT` 켜기 (우리 코드에서 필요)
  - 필요시 `SERVER MEMBERS INTENT`, `PRESENCE INTENT`

---

### 2️⃣ 봇 초대 URL 만들기

- OAuth2 → URL Generator
- **Scopes:** `bot`
- **Bot Permissions:** 최소 `Send Messages`, `Create Public Threads` 선택
  ![Bot Permission 필수 체크사항](image-1.png)
- URL 복사 → 브라우저에서 열고 **서버에 초대**

> 이 과정으로 **서버에 봇 역할(Role)** 생성 + 권한 적용

---

### 3️⃣ 프로젝트 생성 및 코드 작성

- Node.js 프로젝트 초기화 (`npm init -y`)
- 패키지 설치 (`discord.js`, `node-cron`, `dotenv`)
- `.env` 작성 (`DISCORD_TOKEN`, `CHANNEL_ID`)
- `index.js`에 봇 로그인 + 스케줄링 코드 작성

---

### 4️⃣ Node.js로 봇 실행

```bash
node index.js
```

- 이 단계에서 **봇이 Discord API에 로그인**
- 서버에 이미 초대돼 있으면 채널 접근 가능
- node-cron 스케줄대로 알림 메시지 전송 가능
- 스레드도 자동 생성됨

> ❌ 단, **봇을 서버에 초대하지 않으면** `login`은 성공해도 채널에서 메시지 보내기 실패

---

### 5️⃣ 권한 / 채널 테스트

- 서버에서 봇 역할 확인 → `Send Messages` / `Create Public Threads` 권한 체크
- 테스트 메시지 전송 성공 시 ✅ 모든 준비 완료

---

### 6️⃣ (선택) 계속 실행 / 배포

- 로컬에서 계속 실행하려면 `nodemon` 추천
- 원격 서버 배포 가능 (Railway, Render, VPS 등)

---

### 🔹 핵심 정리

| 단계 | 설명                                               |
| ---- | -------------------------------------------------- |
| 1    | 디스코드 봇 생성 + 토큰 발급 + 인텐트 켜기         |
| 2    | 서버에 초대 (권한 포함)                            |
| 3    | Node.js 프로젝트 생성 + 패키지 설치                |
| 4    | 코드 작성 (로그인 + 알림 스케줄)                   |
| 5    | `node index.js` 실행 → 로그인 + 메시지/스레드 가능 |
| 6    | 권한 확인, 테스트, 필요시 배포                     |

---

- `node index.js`는 **봇을 서버에 초대하는 게 아니라, 이미 존재하는 봇 계정으로 로그인**하는 역할입니다.
- **서버 초대 과정은 따로 해야 합니다** (OAuth2 URL로 서버 초대)

---

## 📝 ES 모듈 & Export/Import

### 1️⃣ Export 방식

| 방식                           | 문법                                                      | 특징                                          |
| ------------------------------ | --------------------------------------------------------- | --------------------------------------------- |
| **Named Export**               | `export function f() {}` <br> `export const a = 1`        | 모듈 내부 여러 값 중 일부를 이름으로 내보냄   |
| **Default Export (함수/값)**   | `export default function f() {}` <br> `export default 42` | 모듈 전체의 대표값, 이름 자유롭게 import 가능 |
| **Default Export (객체 묶음)** | `export default { f1, f2 }`                               | 여러 함수를 하나의 객체로 묶어서 내보냄       |

---

### 2️⃣ Import 방식

| Export 방식              | Import 문법                      | 사용 예시                                           |
| ------------------------ | -------------------------------- | --------------------------------------------------- |
| Named Export             | `import { f1, f2 } from './mod'` | 구조분해처럼 필요한 값만 가져옴                     |
| Default Export (값/함수) | `import anyName from './mod'`    | default 속성 하나를 가져옴, 이름 자유롭게 지정 가능 |
| Default Export (객체)    | `import obj from './mod'`        | `obj.f1()`, `obj.f2()` 형태로 사용                  |
| 전체 가져오기            | `import * as mod from './mod'`   | `mod.f1()`, `mod.default()` 형태                    |

---

### 3️⃣ 예시 코드

```js
// cardService.js

// Named Export
export function card1() {
  console.log("카드1");
}
export function card2() {
  console.log("카드2");
}

// Default Export (함수)
export default function card3() {
  console.log("카드3");
}

// Default Export (객체 묶음)
// export default { card1, card2, card3 };
```

```js
// cardController.js

// 1️⃣ Named + Default 혼합 import
import card3, { card1, card2 } from "./cardService";
card1();
card2();
card3();

// 2️⃣ Default 객체 import
import cardService from "./cardService";
cardService.card1();
cardService.card2();

// 3️⃣ 별칭(alias) 사용
import { card1 as c1, card2 as c2 } from "./cardService";
c1();
c2();
```

---

### 4️⃣ 객체 속성에 할당된 함수

```js
const obj = {
  greet: function () {
    console.log("hi");
  },
};

obj.greet(); // ✅ 객체 속성 함수 호출
```

- JS 용어: **객체 속성 함수** 또는 **메서드(method)**
- ❌ 고차 함수(Higher-Order Function) 아님
- ❌ 콜백 함수(Callback Function) 아님

---

### 5️⃣ 핵심 원리

1. **모듈은 내부적으로 항상 “네임스페이스 객체(namespace)”**
2. `{}` 구조분해 import → 모듈 객체 속성 꺼내는 문법 설탕
3. default export → 모듈 객체의 `default` 속성 하나를 대표값으로 가져오는 문법 설탕
4. default 객체 export → import 후 `객체명.속성()`으로 호출
5. 객체 속성에 함수 할당 → **메서드 호출**

---

### 6️⃣ 실무 팁

- 서비스/유틸 파일은 **객체 묶음 default export** 패턴 추천

  ```js
  export default { api1, api2, api3 };
  import apiService from "./apiService";
  apiService.api1();
  ```

- 컴포넌트 파일은 **default export** 추천 (React)
- 여러 개 utility 함수 → **named export** 추천

---

</details>

---

## 🧠 오늘의 회고 (아쉬움 & 배운 점)

- 예

---

## 🚀 내일의 계획

- 예
